# vi: ft=fish

# function update
#   echo "$workspaces" \
#     | jq -c ".[].active |= false" \
#     | jq -c "[ .[] | select(.id == $id).active |= true ]" \
#     | jq -c "sort_by(.id)"
# end
# 
# function get_workspaces
#   set -g workspaces (hyprctl workspaces -j | jq -c)
# end
# 
# function get_current
#   set current (hyprctl activeworkspace -j | jq -c)
#   set -g id (echo $current | jq -c '.id')
# end
# 
# get_workspaces
# get_current
# update
# 
# socat -U - UNIX-CONNECT:$XDG_RUNTIME_DIR/hypr/$HYPRLAND_INSTANCE_SIGNATURE/.socket2.sock | while read line
#   string match -q -r '^(?<event>\w+)>>(?<data>.+)$' $line
# 
#   switch $event
#     case "workspacev2"
#       set -g id (string split -f 1 ',' $data)
#       get_workspaces
#       update
#     case "createworkspace"
#       get_workspaces
#       update
#     case "destroyworkspace"
#       get_workspaces
#       update
#   end
# end
